<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Detect WebView</title>
    <base href="/" />

    <style>
      html {
        height: 100vh;
      }

      body {
        height: 100%;
        position: fixed;
      }
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/UAParser.js/1.0.35/ua-parser.min.js"></script>
  </head>
  <body>
    <pre>
      This page tries to detect iOS WebView (WKWebView, SFSafariViewController and UIWebView)
    </pre>

    <div>OS: <span id="os-text"></span></div>
    <div>Device: <span id="device-text"></span></div>
    <div>Navigator: <span id="navigator-text"></span></div>
    <div>WebView: <span id="web-view-text"></span></div>

    <script>
      function isMovil() {
        if ("maxTouchPoints" in window.navigator)
          return window.navigator.maxTouchPoints > 0;

        const mQ = matchMedia?.("(pointer:coarse)");
        if (mQ?.media === "(pointer:coarse)") return !!mQ.matches;

        if ("orientation" in window) return true;

        return (
          /\b(BlackBerry|webOS|iPhone|IEMobile)\b/i.test(
            window.navigator.userAgent
          ) ||
          /\b(Android|Windows Phone|iPad|iPod)\b/i.test(
            window.navigator.userAgent
          )
        );
      }

      function detectWebView() {
        // Method #1
        if (window?.webkit?.messageHandlers) {
          return true;
        }
        // Method #2
        const webViewMode =
          window.document?.documentElement?.clientHeight ===
          window.document?.documentElement?.scrollHeight;
        return webViewMode;
      }

      const propertiesNavigator = () => {
        const uaParser = new UAParser(window.navigator.userAgent);

        const resultOS = uaParser.getOS();
        const result = uaParser.getResult();

        console.table(result);

        console.log(uaParser.getResult().browser.name);

        const device = result.device.vendor + " - " + result.device.model;
        const so = result.os.name;
        const navigator = result.browser.name;

        return {
          device,
          so,
          navigator,
        };
      };

      let osEl = document.querySelector("#os-text");
      let deviceEl = document.querySelector("#device-text");
      let webViewEl = document.querySelector("#web-view-text");
      let navigatorEl = document.querySelector("#navigator-text");
      const { device, so, navigator } = propertiesNavigator();

      osEl.textContent = so;
      deviceEl.textContent = device;
      navigatorEl.textContent = navigator;
      webViewEl.textContent = isMovil() && detectWebView() ? "Yes" : "No";
    </script>
  </body>
</html>
